
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>折腾来折腾去</title>
	<meta name="author" content="pikipity">

	
	<meta name="description" content="初音时钟 转载自猫牧場 如果您无法正常显示时钟，请下载 Adobe Flash Player About Me &#8211; pikipity pikipity 的小博客，搜罗最新最有意思的科技话题，展示自己的所知所学所感。 如果发现问题，请在文章后面留言指出或是直接点这里发邮件给我指正，谢谢 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="折腾来折腾去" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">折腾来折腾去</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/project">Project</a></li>
       <li><a href="/aboutme">AboutMe</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/project">Project</a></li>
       <li><a href="/aboutme">AboutMe</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:pikipity.github.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		<a class="weibo" href="http://weibo.com/pikipitywz" title="Weibo">Weibo</a>
		
		
		<a class="github" href="https://github.com/pikipity" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="http://feed.feedsky.com/rsqe" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:pikipity.github.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">

    <aside class="sidebar">
      
        <section>
  <h1>初音时钟</h1>
  <ul id="for_fun">
  转载自<a href="http://nekokan.easter.ne.jp/flush/mikuclock.html">猫牧場</a>
  <embed src="/mikuclock.swf" width="150" height="180"><br/>
  如果您无法正常显示时钟，请下载 <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http%3A%2F%2Fget.adobe.com%2Fflashplayer%2F&ei=tdsyUa_FB6i9iAfiooGoBg&usg=AFQjCNFV-EC-o0osKJm2dFwEBoUMPY6T2g&sig2=JhnyQZkKEKmbC248ALP2Fw&bvm=bv.43148975,d.aGc">Adobe Flash Player</a>
  </ul>
</section><section>
  <h1>About Me &#8211; pikipity</h1>
  <ul id="post">
  pikipity 的小博客，搜罗最新最有意思的科技话题，展示自己的所知所学所感。<p>
  
  <img src="/images/myface.gif" width="100pt"><p>
  
  如果发现问题，请在文章后面留言指出或是直接点<a href="mailto:pikipityw@gmail.com">这里</a>发邮件给我指正，谢谢。<p>
  
  pikipity Blog: <a href="http://pikipity.github.com/">pikipity.github.com</a>
  pikipity Email: <a href="mailto:pikipityw@gmail.com">pikipityw.gmail.com</a>
  
  使用IE浏览器可能无法得到完美的浏览体验，建议更换为<a href="https://www.google.com/intl/en/chrome/browser/"> Chrome 浏览器</a>
  </ul>
</section>
<section>
<h1>Ask Me</h1>
<ul id="post">
<iframe src="http://ask.fm/widget/f6be5091444e6de222079c5859b4a375f13aa085?stylesheet=small&fgcolor=%23000000&bgcolor=%23EFEFEF&lang=33" frameborder="0" scrolling="no" width="120" height="150" style="border:none;"></iframe>
</ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <ul id="tags">
    <span id="tag-cloud"><a href='/blog/categories/assembly' style='font-size: 114.48275862068965%'>Assembly(7)</a> <a href='/blog/categories/cartoon' style='font-size: 108.27586206896552%'>Cartoon(4)</a> <a href='/blog/categories/circuit' style='font-size: 106.20689655172414%'>Circuit(3)</a> <a href='/blog/categories/game' style='font-size: 114.48275862068965%'>Game(7)</a> <a href='/blog/categories/github' style='font-size: 106.20689655172414%'>Github(3)</a> <a href='/blog/categories/google' style='font-size: 135.17241379310343%'>Google(17)</a> <a href='/blog/categories/ios' style='font-size: 108.27586206896552%'>IOS(4)</a> <a href='/blog/categories/life' style='font-size: 160.0%'>Life(29)</a> <a href='/blog/categories/linux' style='font-size: 114.48275862068965%'>Linux(7)</a> <a href='/blog/categories/mac' style='font-size: 124.82758620689656%'>Mac(12)</a> <a href='/blog/categories/matlab' style='font-size: 122.75862068965517%'>Matlab(11)</a> <a href='/blog/categories/movie' style='font-size: 108.27586206896552%'>Movie(4)</a> <a href='/blog/categories/octopress' style='font-size: 106.20689655172414%'>Octopress(3)</a> <a href='/blog/categories/others' style='font-size: 118.62068965517241%'>Others(9)</a> <a href='/blog/categories/processing' style='font-size: 104.13793103448276%'>Processing(2)</a> <a href='/blog/categories/python' style='font-size: 112.41379310344827%'>Python(6)</a> <a href='/blog/categories/scm' style='font-size: 124.82758620689656%'>SCM(12)</a> <a href='/blog/categories/technology' style='font-size: 128.9655172413793%'>Technology(14)</a> </span>
    <span id="tag-cloud"><embed type='application/x-shockwave-flash' src='/javascripts/tagcloud.swf'width='100%' height='250' bgcolor='#f2f2f2' id='tagcloudflash' name='tagcloudflash' quality='high' allowscriptaccess='always'flashvars="tcolor=0x333333&amp;tcolor2=0x333333&amp;hicolor=0x000000&amp;tspeed=100&amp;distr=true&amp;mode=tags&amp;tagcloud=%3Ctags%3E%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fassembly%27+style%3D%27font-size%3A+19.655172413793103%25%27%3EAssembly%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fcartoon%27+style%3D%27font-size%3A+15.517241379310345%25%27%3ECartoon%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fcircuit%27+style%3D%27font-size%3A+14.137931034482758%25%27%3ECircuit%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fgame%27+style%3D%27font-size%3A+19.655172413793103%25%27%3EGame%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fgithub%27+style%3D%27font-size%3A+14.137931034482758%25%27%3EGithub%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fgoogle%27+style%3D%27font-size%3A+33.44827586206897%25%27%3EGoogle%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fios%27+style%3D%27font-size%3A+15.517241379310345%25%27%3EIOS%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Flife%27+style%3D%27font-size%3A+50.0%25%27%3ELife%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Flinux%27+style%3D%27font-size%3A+19.655172413793103%25%27%3ELinux%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fmac%27+style%3D%27font-size%3A+26.551724137931036%25%27%3EMac%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fmatlab%27+style%3D%27font-size%3A+25.17241379310345%25%27%3EMatlab%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fmovie%27+style%3D%27font-size%3A+15.517241379310345%25%27%3EMovie%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Foctopress%27+style%3D%27font-size%3A+14.137931034482758%25%27%3EOctopress%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fothers%27+style%3D%27font-size%3A+22.413793103448278%25%27%3EOthers%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fprocessing%27+style%3D%27font-size%3A+12.758620689655173%25%27%3EProcessing%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fpython%27+style%3D%27font-size%3A+18.275862068965516%25%27%3EPython%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Fscm%27+style%3D%27font-size%3A+26.551724137931036%25%27%3ESCM%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fpikipity.github.com%2Fblog%2Fcategories%2Ftechnology%27+style%3D%27font-size%3A+29.310344827586206%25%27%3ETechnology%3C%2Fa%3E+%3C%2Ftags%3E"></span>
    如果您无法正常显示云标签，请下载 <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http%3A%2F%2Fget.adobe.com%2Fflashplayer%2F&ei=tdsyUa_FB6i9iAfiooGoBg&usg=AFQjCNFV-EC-o0osKJm2dFwEBoUMPY6T2g&sig2=JhnyQZkKEKmbC248ALP2Fw&bvm=bv.43148975,d.aGc">Adobe Flash Player</a>
   </ul>
</section>

<section>
  <h2>Recent Post</h2>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/practice-for-processing.html">processing 练习作 &#8211; 小画板</a>
      </li>
    
      <li class="post">
        <a href="/blog/heitongguge.html">听黑桐谷歌访谈有感</a>
      </li>
    
      <li class="post">
        <a href="/blog/new-game-processing.html">新玩具 &#8211; Processing</a>
      </li>
    
      <li class="post">
        <a href="/blog/youtube-dl-gui.html">youtube-dl GUI</a>
      </li>
    
      <li class="post">
        <a href="/blog/tutorialspoint.html">tutorialspoint &#8211; Simple Easy Learning</a>
      </li>
    
  </ul>
</section>
<section>
<h2>RSS Feed</h2>
<ul id="RSS_feed">
<!-- Feedsky FEED发布代码开始 -->
<!-- FEED自动发现标记开始 -->
<link title="RSS 2.0" type="application/rss+xml" href="http://feed.feedsky.com/rsqe" rel="alternate" />
<!-- FEED自动发现标记结束 -->
<a href="http://www.zhuaxia.com/add_channel.php?url=http://feed.feedsky.com/rsqe" target="_blank"><img border="0" src="http://img.feedsky.com/images/icon_subshot01_zhuaxia.gif" alt="&#25235;&#34430;" vspace="2" style="margin-bottom:3px" ></a><a href="http://fusion.google.com/add?feedurl=http://feed.feedsky.com/rsqe" target="_blank"><img border="0" src="http://img.feedsky.com/images/icon_subshot01_google.gif" alt="google reader" vspace="2" style="margin-bottom:3px" ></a><br>
<a href="http://add.my.yahoo.com/rss?url=http://feed.feedsky.com/rsqe" target="_blank"><img border="0" src="http://img.feedsky.com/images/icon_subshot01_yahoo.gif" alt="my yahoo" vspace="2" style="margin-bottom:3px" ></a><a href="http://inezha.com/add?url=http://feed.feedsky.com/rsqe" target="_blank"><img border="0" src="http://img.feedsky.com/images/icon_subshot01_nazha.gif" alt="&#21738;&#21522;" vspace="2" style="margin-bottom:3px" ></a><br>
<a href="http://reader.youdao.com/b.do?keyfrom=feedsky&url=http://feed.feedsky.com/rsqe" target="_blank"><img border="0" src="http://img.feedsky.com/images/icon_subshot01_youdao.gif" alt="&#26377;&#36947;" vspace="2" style="margin-bottom:3px" ></a><a href="http://mail.qq.com/cgi-bin/feed?u=http://feed.feedsky.com/rsqe" target="_blank"><img border="0" src="http://img.feedsky.com/images/icon_subshot01_qq.gif" alt="QQ&#37038;&#31665;" vspace="2" style="margin-bottom:3px" ></a><br>
<!-- Feedsky FEED发布代码结束 -->
</ul>
</section><section>
<h1>Copyright Agreement</h1>
<ul id="copyright">
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />本网站作品，非特别声明，皆为原创。本网站所有原创作品均采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh">知识共享署名-非商业性使用-相同方式共享 3.0 未本地化版本许可协议</a>进行许可。
</ul>
</section><!DOCTYPE html>
<section>
<h1>For Fun</h1>
<ul id="for_fun">
	<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta description="runjs.cn 首发，求好看的 CSS">
	<meta description="信则有，不信则无，总之作者不会对该程序生成的内容负任何责任。">
	<meta description="虽然在微博发现冒充原作者的账号，但不想打击大家 fork 的热情，所以页面上不会有任何关于作者的声明。">
	<meta author="twitter: @fake_faith, G+: Yiding He">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>
		程序员求签
	</title>
	<script id="jquery_183" type="text/javascript" class="library"
	src="http://sandbox.runjs.cn/js/sandbox/jquery/jquery-1.8.3.min.js">
	</script>
	</head>
	<body>
		<div class="container">
			<div class="title">
        程序员求签
				<sup>
					beta
				</sup>
		<br />
		源码来自<a href="http://runjs.cn/">RunJS</a>的<a href="http://runjs.cn/detail/yu9cs4i4">程序员求签</a>
		</div>
		<div class="info">
			<strong>求</strong>婚丧嫁娶亲友疾病编程测试升职跳槽陨石核弹各类吉凶
		</div>
		<div class="date_for_fun">
		</div>
		<div class="check_luck">
			<ul style="margin-top:0;padding-left:30px;line-height:130%">
				<li>编码测试修复提交之前求一签，可避凶趋吉</li>
				<li>选择所求之事并在心中默念，再单击“求”即可</li>
				<li>同一件事只能求一次，下次再求需刷新页面</li>
			</ul>
			<table class="event_table selecttable">
				<tr>
					<td class="" data-event="100">
						编码
					</td>
					<td class="" data-event="200">
						测试
					</td>
					<td class="" data-event="300">
						修复BUG
					</td>
					<td class="" data-event="400">
						提交代码
					</td>
					<td class="" data-event="500">
						其他
					</td>
				</tr>
			</table>
		</div>
		<div class="roll">
			<div class="card" style="top:-1px;font-size:20pt">
				请点击所求之事
			</div>
			<div class="card clickable">
				求
			</div>
		</div>
			
	</div>

<style>



.container {
	width: 210px;
	margin: 0 auto 50px;
}

.info {
	text-align: center;
	color: #dc143c;
	font-size: 9pt;
}

.info strong {
	background:crimson;
	color: white;
	padding:0 3px;
	margin: 0 1px;
}

.container>.title {
	color: #bbb;
	font-weight: bold;
	margin-bottom: 10px;
	background: #555;
	padding: 5px 15px;
	font-size: 120%;
}

.date_for_fun {
	font-size: 16pt;
	font-weight: bold;
	line-height: 30pt;
	text-align: center;
	border-bottom: 1px solid #999;
}

.check_luck {
	padding-top: 10px;
}

.selecttable {
	width: 100%;
}

.selecttable td {
	text-align: center;
	padding: 10px 0;
	margin: 1px;
	background: #ccc;
	cursor: pointer;
	width: 20%;
	border-radius:2px;
}

.selecttable td:hover {
	background: #aaa;
}

.selecttable td.selected {
	background: #333;
	color: #fff;
}

.roll {
	height: 200px;
	border:1px solid #faa;
	margin-top:10px;
	overflow: hidden;
	position: relative;
}

.card {
	background:#ffffff;
	font-size: 70pt;
	font-weight: bold;
	text-align: center;
	line-height: 200px;
	border-top: 1px solid #faa;
	position: absolute;
	top: 201px;
	width: 100%;
}

.card.clickable {
	background: crimson;
	color: #ffffff;
	cursor: pointer;
}</style>

<script>

//
/*
 * 注意：本程序中的“随机”都是伪随机概念。
 * 第一个种子相对固定，第二个种子相对有更多变化
 */
function random(seed1, seed2) {
	var n = seed1 % 11117;
	for (var i = 0; i < 100 + seed2; i++) {
		n = n * n;
		n = n % 11117; // 11117 是个质数
	}
	return n;
}

// 从数组中随机挑选 size 个
function pickRandom(array, size) {
	var result = [];

	for (var i = 0; i < array.length; i++) {
		result.push(array[i]);
	}

	for (var j = 0; j < array.length - size; j++) {
		var index = random(iday, j) % result.length;
		result.splice(index, 1);
	}

	return result;
}

var weeks = ["日", "一", "二", "三", "四", "五", "六"];
function getTodayString() {
	return "今天是" + today.getFullYear() + "年" + (today.getMonth() + 1) + "月" + today.getDate() + "日 星期" + weeks[today.getDay()];
}

var today = new Date();
var timeseed = today.getMilliseconds();

/////////////////////////////////////////////////////////

var results = ['超大吉', '大吉', '吉', '小吉', '未知', '小胸', '胸', '大胸', '超大胸'];
var luck_rate = [10, 100, 500, 800, 300, 800, 500, 100, 10]; // 吉凶概率分布，总数为 3120

var descriptions = {
	100: ['写起代码来如游戏达人打通关一般痛快', '“代码本来就在那里，我不过是把它们写出来罢了。”', '单元测试可以一次通过，如果有单元测试的话。', '正确的划分逻辑，将保持你的思路清晰。', '不会出什么大问题。', '', '', '', ''],
	200: ['', '', '', '', '', '', '', '', ''],
	300: ['', '', '', '', '', '', '', '', ''],
	400: ['', '', '', '', '', '', '', '', ''],
	500: ['', '', '', '', '', '', '', '', '']
};

function pickRandomWithRate(seed1, seed2) {
	var result = random(seed1, seed2) % 3120;
	var addup = 0;
	
	for (var i = 0; i < luck_rate.length; i++) {
		addup += luck_rate[i];
		if (result <= addup) {
			return results[i];
		}
	}
	return ' ';
}

/////////////////////////////////////////////////////////
var selectedEvent = null;

function initEventTable() {
	$('.event_table td').click(function() {
		$('.event_table td').removeClass('selected');
		$(this).addClass('selected'); 
		selectedEvent = $(this).data('event');
		
		$('div.card.clickable').nextAll().remove();
		showCard('div.card.clickable', 300);
	});
}

// TODO 概率分布
function getNextCardText() {
	return pickRandomWithRate(timeseed + selectedEvent, slidecount);
}

function showCard(selector, duration, complete) {
	$(selector).animate({top:'-1px'}, duration, 'swing', complete);
}

var tail, slidecount = 0;

function initClickEvent() {
	$('div.card.clickable').click(function() {
		tail = $('div.card.clickable');
		slidecount = 0;
		slide();
	});
}

function slide() {
	if (slidecount > 35) {
		return;
	}
	
	var duration = slidecount > 32? 800: 
			(slidecount > 25? 400: 
			 (slidecount > 20? 200: 
				(slidecount > 15? 150: 100)));
	card = $('<div class="card">' + getNextCardText() +'</div>');
	tail.after(card);
	tail = card;
	slidecount++;
	showCard(card, duration, slide);
}

$(function() {
	$('.date_for_fun').html(getTodayString());
	initEventTable();
	initClickEvent();
});</script>

	</body>
</ul>
</section><section>
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta description="runjs.cn 首发，求好看的 CSS">
		<meta description="信则有，不信则无，总之作者不会对该程序生成的内容负任何责任。">
		<meta description="虽然在微博发现冒充原作者的账号，但不想打击大家 fork 的热情，所以页面上不会有任何关于作者的声明。">
		<meta author="twitter: @fake_faith, G+: Yiding He">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>程序员老黄历</title>
	<script id="jquery_183" type="text/javascript" class="library" src="/js/sandbox/jquery/jquery-1.8.3.min.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="title">
				程序员老黄历<sup>beta</sup>
				<br />
				源码来自<a href="http://runjs.cn/">RunJS</a>的<a href="http://sandbox.runjs.cn/show/ydp3it7b">程序员老黄历</a>
			</div>
			<div class="date_for_fun_2">
			</div>
			<div class="good">
				<div class="title">
					<table>
						<tr><td>宜</td></tr>
					</table>
				</div>
				<div class="content">
					<ul></ul>
				</div>
				<div class="clear"></div>
			</div>
			<div class="split"></div>
			<div class="bad">
				<div class="title">
					<table>
						<tr><td>不宜</td></tr>
					</table>
				</div>
				<div class="content">
					<ul></ul>
				</div>
				<div class="clear"></div>
			</div>
			<div class="split"></div>
			<div class="line-tip">
				<strong>座位朝向：</strong>面向<span class="direction_value"></span>写程序，BUG 最少。
			</div>
			<div class="line-tip">
				<strong>今日宜饮：</strong><span class="drink_value"></span>
			</div>
			<div class="line-tip">
				<strong>女神亲近指数：</strong><span class="goddes_value">
			</div>
			
			<div class="comment">
				
					<li>本老黄历尚处于beta阶段，作者随时会修改，所以如果上午看到的内容跟下午不同，请勿惊慌；</li>
					<li>本老黄历仅面向程序员；</li>
					<li>本老黄历内容是程序生成的，因为只有这样程序员才会信。</li>
				
			</div>
		</div>
	

    	<style>

.container {
	width: 210px;
	margin: 0 auto 50px;
}

.container>.title {
	color: #bbb;
	font-weight: bold;
	margin-bottom: 10px;
	background: #555;
	padding: 5px 15px;
}

.date_for_fun_2{
	font-size:16pt;
	font-weight: bold;
	line-height: 30pt;
	text-align: center;
}

.split, .clear {
	clear: both;
	height: 1px;
	overflow-y: hidden;
}

.good, .bad {
	clear: both;
	position: relative;
}

.bad {
	/*top: -1px;*/
}

.good .title, .bad .title {
	float: left;
	width: 100px;
	font-weight: bold;
	text-align: center;
	font-size: 30pt;
	position:absolute;
	top:0;
	bottom:0;
}

.good .title>table, .bad .title>table {
	position:absolute;
	width:100%;
	height:100%;
	border:none;
}

.good .title {
	background: #ffee44;
}

.bad .title {
	background: #ff4444;
	color: #fff;
}

.good .content, .bad .content {
	margin-left: 115px;
	padding-right: 10px;
	padding-top: 1px;
	font-size:15pt;
}

.good {
	background: #ffffaa;
}

.bad {
	background: #ffddd3;
}

.content ul {
	list-style: none;
	margin:10px 0 0;
	padding:0;
}

.content ul li {
	line-height:150%;
	font-size: 15pt;
	font-weight: bold;
	color: #444;
}

.content ul li div.description {
	font-size: 10pt;
	font-weight: normal;
	color: #777;
	line-height: 110%;
	margin-bottom: 10px;
}

.line-tip {
	font-size: 11pt;
	margin-top: 10px;
	margin-left: 10px;
}

.direction_value {
	color:#4a4;
	font-weight: bold;
}

.comment {
	margin-top: 50px;
	font-size: 11pt;
	margin-left: 10px;
}

.comment ul {
	margin-left: 0;
	padding-left: 20px;
	color: #999;
}</style>
	    		<script>//

/*
 * 注意：本程序中的“随机”都是伪随机概念，以当前的天为种子。
 */
function random(dayseed, indexseed) {
	var n = dayseed % 11117;
	for (var i = 0; i < 100 + indexseed; i++) {
		n = n * n;
		n = n % 11117;   // 11117 是个质数
	}
	return n;
}

var today = new Date();
var iday = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();

var weeks = ["日","一","二","三","四","五","六"];
var directions = ["北方","东北方","东方","东南方","南方","西南方","西方","西北方"];
var activities = [
	{name:"写单元测试", good:"写单元测试将减少出错",bad:"写单元测试会降低你的开发效率"},
	{name:"洗澡", good:"你几天没洗澡了？",bad:"会把设计方面的灵感洗掉"},
	{name:"锻炼一下身体", good:"",bad:"能量没消耗多少，吃得却更多"},
	{name:"抽烟", good:"抽烟有利于提神，增加思维敏捷",bad:"除非你活够了，死得早点没关系"},
	{name:"白天上线", good:"今天白天上线是安全的",bad:"可能导致灾难性后果"},
	{name:"重构", good:"代码质量得到提高",bad:"你很有可能会陷入泥潭"},
	{name:"使用%t", good:"你看起来更有品位",bad:"别人会觉得你在装逼"},
	{name:"跳槽", good:"该放手时就放手",bad:"鉴于当前的经济形势，你的下一份工作未必比现在强"},
	{name:"招人", good:"你遇到千里马的可能性大大增加",bad:"你只会招到一两个混饭吃的外行"},
	{name:"面试", good:"面试官今天心情很好",bad:"面试官不爽，会拿你出气"},
	{name:"提交辞职申请", good:"公司找到了一个比你更能干更便宜的家伙，巴不得你赶快滚蛋",bad:"鉴于当前的经济形势，你的下一份工作未必比现在强"},
	{name:"申请加薪", good:"老板今天心情很好",bad:"公司正在考虑裁员"},
	{name:"晚上加班", good:"晚上是程序员精神最好的时候",bad:""},
	{name:"在妹子面前吹牛", good:"改善你矮穷挫的形象",bad:"会被识破"},
	{name:"撸管", good:"避免缓冲区溢出",bad:"小撸怡情，大撸伤身，强撸灰飞烟灭"},
	{name:"浏览成人网站", good:"重拾对生活的信心",bad:"你会心神不宁"},
	{name:"命名变量\"%v\"", good:"",bad:""},
	{name:"写超过%l行的方法", good:"你的代码组织的很好，长一点没关系",bad:"你的代码将混乱不堪，你自己都看不懂"},
	{name:"提交代码", good:"遇到冲突的几率是最低的",bad:"你遇到的一大堆冲突会让你觉得自己是不是时间穿越了"},
	{name:"代码复审", good:"发现重要问题的几率大大增加",bad:"你什么问题都发现不了，白白浪费时间"},
	{name:"开会", good:"写代码之余放松一下打个盹，有益健康",bad:"你会被扣屎盆子背黑锅"},
	{name:"打DOTA", good:"你将有如神助",bad:"你会被虐的很惨"},
	{name:"晚上上线", good:"晚上是程序员精神最好的时候",bad:"你白天已经筋疲力尽了"},
	{name:"修复BUG", good:"你今天对BUG的嗅觉大大提高",bad:"新产生的BUG将比修复的更多"},
	{name:"设计评审", good:"设计评审会议将变成头脑风暴",bad:"人人筋疲力尽，评审就这么过了"},
	{name:"需求评审", good:"",bad:""},
	{name:"上微博", good:"今天发生的事不能错过",bad:"会被老板看到"},
	{name:"上AB站", good:"还需要理由吗？",bad:"会被老板看到"}
];

var specials = [
	{date:20130221, type:'good', name:'防核演习', description:'万一哪个疯子丢颗核弹过来...'}
];

var tools = ["Eclipse写程序", "MSOffice写文档", "记事本写程序", "Windows8", "Linux", "MacOS", "IE", "Android设备", "iOS设备"];

var varNames = ["jieguo", "huodong", "pay", "expire", "zhangdan", "every", "free", "i1", "a", "virtual", "ad", "spider", "mima", "pass", "ui"];

var drinks = ["水","茶","红茶","绿茶","咖啡","奶茶","可乐","牛奶","豆奶","果汁","果味汽水","苏打水","运动饮料","酸奶","酒"];

function getTodayString() {
	return "今天是" + today.getFullYear() + "年" + (today.getMonth() + 1) + "月" + today.getDate() + "日 星期" + weeks[today.getDay()];
}

// 生成今日运势
function pickTodaysLuck() {
	var numGood = random(iday, 98) % 3 + 2;
	var numBad = random(iday, 87) % 3 + 2;
	var eventArr = pickRandomActivity(numGood + numBad);
	
	var specialSize = pickSpecials();
	
	for (var i = 0; i < numGood; i++) {
		addToGood(eventArr[i]);
	}
	
	for (var i = 0; i < numBad; i++) {
		addToBad(eventArr[numGood + i]);
	}
	
	
}

// 添加预定义事件
function pickSpecials() {
	var specialSize = [0,0];
	
	for (var i = 0; i < specials.length; i++) {
		var special = specials[i];
		
		if (iday == special.date) {
			if (special.type == 'good') {
				specialSize[0]++;
				addToGood({name: special.name, good: special.description});
			} else {
				specialSize[1]++;
				addToBad({name: special.name, bad: special.description});
			}
		}
	}
	
	return specialSize;
}

// 从 activities 中随机挑选 size 个
function pickRandomActivity(size) {
	var picked_events = pickRandom(activities, size);
	
	for (var i = 0; i < picked_events.length; i++) {
		picked_events[i] = parse(picked_events[i]);
	}
	
	return picked_events;
}

// 从数组中随机挑选 size 个
function pickRandom(array, size) {
	var result = [];
	
	for (var i = 0; i < array.length; i++) {
		result.push(array[i]);
	}
	
	for (var j = 0; j < array.length - size; j++) {
		var index = random(iday, j) % result.length;
		result.splice(index, 1);
	}
	
	return result;
}

// 解析占位符并替换成随机内容
function parse(event) {
	var result = {name: event.name, good: event.good, bad: event.bad};  // clone
	
	if (result.name.indexOf('%v') != -1) {
		result.name = result.name.replace('%v', varNames[random(iday, 12) % varNames.length]);
	}
	
	if (result.name.indexOf('%t') != -1) {
		result.name = result.name.replace('%t', tools[random(iday, 11) % tools.length]);
	}
	
	if (result.name.indexOf('%l') != -1) {
		result.name = result.name.replace('%l', (random(iday, 12) % 247 + 30).toString());
	}
	
	return result;
}

// 添加到“宜”
function addToGood(event) {
	$('.good .content ul').append('<li><div class="name">' + event.name + '</div><div class="description">' + event.good + '</div></li>');
}

// 添加到“不宜”
function addToBad(event) {
	$('.bad .content ul').append('<li><div class="name">' + event.name + '</div><div class="description">' + event.bad + '</div></li>');
}

$(function(){
	$('.date_for_fun_2').html(getTodayString());
	$('.direction_value').html(directions[random(iday, 2) % directions.length]);
	$('.drink_value').html(pickRandom(drinks,2).join());
	$('.goddes_value').html(random(iday, 6) % 50 / 10.0);
	pickTodaysLuck();
});</script>
</body>
</section>
	

      
    </aside>



    <article class="post">
	<h2 class="title">
		
		<a href="/blog/practice-for-processing.html">
		
			Processing 练习作 &#8211; 小画板</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-09-05T16:57:00+08:00" pubdate data-updated="true">2013年09月05日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/processing/'>Processing</a>


</div>
		
			<span class="comments"><a href="/blog/practice-for-processing.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>在<a href="http://pikipity.github.io/blog/new-game-processing.html">这篇文章</a>中我简单介绍了用来编写视觉交互式软件的编程语言 <a href="https://processing.org/">processing</a>，这是我的一个练习作 – 一个简单的小画板，旨在练习 Processing 的基本命令和熟悉 Java 的语法。源代码可以到<a href="https://github.com/pikipity/Drawer.git">这里</a>下载。</p>

<p>左侧选择工具，右侧选择画笔粗细和颜色。按”e”键结束当前工具输入（画直线、方框、圆形和不规则图形时有效）；按”r”键画布清零。</p>

<p>截图：</p>

<p><img src="https://lh6.googleusercontent.com/-CQpds8QLtt8/UihEwkBDmPI/AAAAAAAABH4/SeNgK7VRgr8/s640/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-09-05%2520%25E4%25B8%258B%25E5%258D%25884.43.37.png" alt="界面" /></p>

<p>小问题：</p>

<ol>
  <li>没有保存功能。</li>
  <li>颜色和画笔粗细比较单一。</li>
  <li>在画直线、方框、圆形和不规则图形时没有预览功能，不方便。</li>
</ol>

<p>在编写过程中就会发现 processing 语言在功能上还是有一定的欠缺的，比如不能够抓取一部分界面进行重绘，换句话说就是没有“撤销”功能，但是如果仅仅想编写一个静态的交互界面已经绰绰有余了，无怪乎很多 Arduino 教学网站都推荐这个语言。</p>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/heitongguge.html">
		
			听黑桐谷歌访谈有感</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-29T09:33:00+08:00" pubdate data-updated="true">2013年08月29日</time></div>
		<div class="tags" style="float:left;">

</div>
		
			<span class="comments"><a href="/blog/heitongguge.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>“黑桐谷歌”是出没于优酷和AB站的著名职业游戏解说，今天推荐的是他的一个访谈，访谈本身很业余（毕竟第一期，业余很正常），但是谷歌坦言的自己开始做游戏解说的历史和一路走来的心路历程才是视频的重点内容。</p>

<embed height="452" width="544" quality="high" allowfullscreen="true" type="application/x-shockwave-flash" src="http://static.hdslb.com/miniloader.swf" flashvars="aid=736273&amp;page=1" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" />

<p>整个过程主要讲了两个话题（我私自将两个话题扩大化）：如何从默默无闻到一呼百应；中国非商业化活动的现状。</p>

<h3 id="section">平民大神</h3>

<p>当我看着视频，听着谷歌大大说着自己做游戏的过程和期间心中所想的时候，我不知不觉想起了以下几个人名（下面几个人都是公认的神级人物，但都离我们很遥远，但是谷歌大大，应该算是平民级的大神，更加贴近我们的生活实际，所以我在这里推荐他的访谈，而不是以下几个人的）：</p>

<ul>
  <li><a href="http://zh.wikipedia.org/wiki/%E7%90%86%E6%9F%A5%E5%BE%B7%C2%B7%E6%96%AF%E6%89%98%E6%9B%BC">理查德·斯托曼</a></li>
  <li><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;sqi=2&amp;ved=0CCoQFjAA&amp;url=http%3A%2F%2Fzh.wikipedia.org%2Fzh-hant%2F%25E5%258F%25B2%25E8%2592%2582%25E5%25A4%25AB%25C2%25B7%25E4%25B9%2594%25E5%25B8%2583%25E6%2596%25AF&amp;ei=R6geUr-kBOfoiAerqYDYCA&amp;usg=AFQjCNFYNdQBHtLgy9nnA5gYJsQoZxglFA&amp;sig2=z8dPt-xkcLHR3B7jpygeFQ&amp;bvm=bv.51495398,d.aGc">史蒂夫·乔布斯</a></li>
  <li><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;sqi=2&amp;ved=0CCoQFjAA&amp;url=http%3A%2F%2Fzh.wikipedia.org%2Fzh-hant%2F%25E6%25AF%2594%25E5%25B0%2594%25C2%25B7%25E7%259B%2596%25E8%258C%25A8&amp;ei=XageUoqlNuTkiAfbnYHYBA&amp;usg=AFQjCNFsmBBPY2jXjFNf4_80u3HXMJT5-g&amp;sig2=2l_1eW8YxA0Yrwy8oT5tfA&amp;bvm=bv.51495398,d.aGc">比尔·盖茨</a></li>
</ul>

<p>回顾它们的创业史，你会发现惊人的相似，它们都具备以下几点：</p>

<ol>
  <li>明确的目标：目标清晰明了，对于自己要做什么、最终结果怎么样，有很准确的定位。还有就是这个目标在自己心中分量必须足够沉重，沉重到即使整个世界都否定了你你还依然能够坚持下去。大多数人即使大学毕业往往还是不知道自己应该做些什么，就算有了目标，当别人否定的时候，也会自己对自己开始质疑，导致徘徊不定，错失良机。</li>
  <li>强大的行动力：不让目标仅仅是个梦想，而是付出自己的努力和心血将其变为现实的行动力是不可或缺的。如果谷歌大大没有前期对市场的考察与研究，没有每个视频背后千百次对游戏的摸索，他也绝对不会像现在这样得到广大粉丝的认可。</li>
  <li>创新力：必要的创新不可或缺，当然我这里所说的创新是对于一个区域甚至世界而言的创新，不是对于个人的创新。谷歌大大逐渐形成的解说风格和其拒绝商业化而采用捐献的方式都是他的创新。</li>
</ol>

<p>以上三点应该是我们每个人最缺乏但是却是成功不可或缺的素质，如果说，高中和上大学都是我们听从父母前辈的建议走的，那么接下来的路怎么走就要靠自己了，别人的经验永远带有个别独立性，别人只能提供方法，我们所能做的只能是借鉴吸收和学习而已。</p>

<h3 id="section-1">中国式咬尾蛇怪圈</h3>

<p>谷歌大大在视频中提到的那个中国游戏视频届的困境，其实也同样是中国开源软硬件的困境。中国人版权意识的淡薄、一味索取不愿付出的习惯必然会导致这样的困境：有的人因为爱好开始做视频（开源软硬件），慢慢地将其变为自己的职业，但为了生计，不得不开始利用自己的爱好寻求经济上的支援，无法得到的情况下只能走上商业化的道路，广告和收费让用户流失，最终放弃。</p>

<p>谷歌大大这种自愿式捐款其实在国外非常常见，很多开源式的软硬件都是使用这种方式来支持自己的生活来实现维护项目的更新，但是在中国这种方式能否走得通还有待进一步的实验，毕竟中国人尤其是中国的电脑和互联网用户已经习惯了只为实体商品付费，而不愿为无形体的商品或是服务付费。这种现状非常不利于开源技术的进步，当所有的科技都被几个大型公司占领的时候，科技发展的速度和前景也就被限制住了，个人的创新也就被限制住了。</p>

<p>但是这种现状的打破需要每个人一点一滴的努力才可以，谷歌大大在微博上放出捐款名单的做法我是很支持的，这种鼓励的方式可以看出还是很有效的。</p>

<p>希望每个人对于这种因爱好而诞生的产物多贡献一点一起努力打破这种中国式怪圈。</p>

<h3 id="section-2">最后</h3>

<p>不要忘了加 <a href="http://weibo.com/pikipitywz">pikipity</a> 和 <a href="http://weibo.com/blackgoogle">黑桐谷歌</a> 的新浪微博呦。<a href="https://me.alipay.com/heitongguge">支持原创，一元也可，有你支持，由黑桐谷歌更新</a></p>

<ul>
  <li><a href="http://space.bilibili.tv/43536">黑桐谷歌 B 站卖萌大厅</a></li>
  <li><a href="http://i.youku.com/u/id_UOTE2MDY5NDg=">黑桐谷歌优酷空间</a></li>
  <li><a href="https://itunes.apple.com/cn/app/you-xi-shi-pin-jie-shuo/id660574550?mt=8">黑桐谷歌视频解说 IOS App</a></li>
</ul>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/new-game-processing.html">
		
			新玩具 &#8211; Processing</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-28T12:37:00+08:00" pubdate data-updated="true">2013年08月28日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/processing/'>Processing</a>


</div>
		
			<span class="comments"><a href="/blog/new-game-processing.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p><img src="https://lh5.googleusercontent.com/-YJlrgUSftcw/Uh2LCQCqpSI/AAAAAAAABHk/BrDYwd8hf_s/s180/180px-Processing_Logo_Clipped.svg.png" alt="Processing" /></p>

<p>在看 Arduino 的资料的时候无意间找到了一个新玩具 – <a href="http://processing.org/">Processing</a>，专门用来开发视觉交互界面用的语言，基础语言是 Java，优点就和他官方网站介绍的一样：</p>

<ul>
  <li>开源，免费下载</li>
  <li>支持多种输出方式，2D、3D 甚至 pdf</li>
  <li>使用 OpenGL 作为 3D 的引擎</li>
  <li>支持多种操作系统，Linux, OSX, Windows</li>
  <li>网络上有众多的扩展库支持</li>
  <li>大量的资料书籍（虽然都是英文的）</li>
</ul>

<p>我的第一反应是把它当做 Pygame 的替代品。相比 Pygame，Processing 的优点众多：</p>

<ul>
  <li>Java 语言本身的优点：Python 蛋疼的内存管理机制和速度问题现在让我越来越烦心了，Java 在这两点上要好得多。</li>
  <li>
    <p>安装方便：Pygame 毕竟是个民间自发的维护项目，更新缓慢，对于刚刚接触 Python 的新手来说安装的过程中就会遇到重重障碍。Processing 的安装则简单的多，而且更新迅速，各个平台的程序都已经打包好了，直接双击安装就可以了，而且自带 IDE（除了自动补全外其他你能想到的、没想到的功能都有了，界面也挺漂亮的），真的是扫除一切学习障碍，诚意满满。</p>

    <p><img src="https://lh5.googleusercontent.com/-m44lymT_wQs/Uh2LCW7aRFI/AAAAAAAABHo/ONQpnwUPbig/s512/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-28%2520%25E4%25B8%258B%25E5%258D%25881.30.05.png" alt="自带 IDE 界面" /></p>
  </li>
  <li>语言更加人性化：Python 的语言已经很人性化了，而 Processing 的语言，尤其是默认变量的命名通过语意猜测就可以知道其代表什么了。命名方式也很统一（Python。。。谁用谁知道，我不吐槽了。）</li>
  <li>事件管理更加轻松：相比 Pygame，Processing 简化了事件管理的部分。不再需要专门再编写代码来获得事件，在 Processing 中鼠标与键盘的事件都变成了一个个默认变量，直接使用这些默认变量就可以获得事件。</li>
  <li>更多扩展库的支持：扩展库不仅数量多而且覆盖的范围很广，使得用 Processing 编写出来的视觉交互界面可以很容易的与其他硬件或软件进行交互，甚至很多特效都已经有库支持，只要直接调用就可以了，非常方便省力。</li>
</ul>

<p>当然，缺点也是有的，其并不适合编写游戏，毕竟此语言是为了开发交互式界面而发明的，对于游戏上的开发乏力还是可以理解的。</p>

<p>总而言之，如果仅仅是想快速开发出一个简单的交互式界面，Processing 绝对是不二人选，但是要开发复杂的交互界面或者游戏的话，还是考虑直接用 Pygame 或是 更加基础的 C 或 C++ 吧。还有因为 Processing 的底层语言是 Java，所以对于我这种用惯了 Python 的人来说，换用 Java 是各种不习惯啊。。。（吐槽：为什么每一句后面都要加个分号啊，为什么还要大括号啊，为什么 for 循环这么麻烦啊。。。）</p>

<p><a href="http://pan.baidu.com/share/link?shareid=1374351361&amp;uk=4080321956">入门教程推荐 – 《爱上 Processing》（专门用了讲解了如何将 Processing 与 Arduino 配合使用）</a></p>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/youtube-dl-gui.html">
		
			Youtube-dl GUI</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-25T15:47:00+08:00" pubdate data-updated="true">2013年08月25日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/mac/'>Mac</a>, <a class='category' href='/blog/categories/movie/'>Movie</a>, <a class='category' href='/blog/categories/python/'>Python</a>


</div>
		
			<span class="comments"><a href="/blog/youtube-dl-gui.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>经常在网上看到一些很好的视频想要保存下来，如果保存成书签的形式，每次打开都要重新加载一遍实在是太麻烦了，最好的当然是下载到电脑上，虽然自己找了许多在 Mac OS X 上下载视频的软件，但是其中的广告或是收费升级通知让我烦不胜烦。最后找到了这个软件 – <a href="http://rg3.github.io/youtube-dl/">youtube-dl</a>。用 Python 编写，本来是专门用于下载 YouTube 上的视频的，但是现在支持大部分的视频网站，经测试优酷和土豆都可以正常下载，唯一的缺点就是没有一个 GUI，每次都要打开终端输入一行代码，而且像我这种记忆渣每次都要查一遍它的参数列表，实在麻烦，但是又不忍放弃，于是决定自己为其写一个 GUI。</p>

<p><a href="http://pikipity.github.io/youtube-dl-GUI/">这里是此 youtube-dl GUI 的项目主页</a>，安装及使用方法都可以找到。下面是软件截图，因为仅仅是为了使用方便，所以看上去和简陋，但是功能还是齐全的，下一步希望可以抽时间把 “Options” 做的更人性化一点。</p>

<p><img src="https://lh3.googleusercontent.com/-rkDZUJACtqo/UhmniKahR7I/AAAAAAAABHM/iwtIZ9ZXXuo/s640/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-25%2520%25E4%25B8%258B%25E5%258D%25882.34.08.png" alt="下载中" /></p>

<p><img src="https://lh3.googleusercontent.com/-ZNcrGbCx18M/UhmniTT8BYI/AAAAAAAABHQ/ig4RsA_k8OM/s640/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-25%2520%25E4%25B8%258B%25E5%258D%25882.34.31.png" alt="选择 Options" /></p>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/tutorialspoint.html">
		
			Tutorialspoint &#8211; Simple Easy Learning</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-23T11:24:00+08:00" pubdate data-updated="true">2013年08月23日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/technology/'>Technology</a>


</div>
		
			<span class="comments"><a href="/blog/tutorialspoint.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p><img src="https://lh3.googleusercontent.com/-EOXgioZB97c/UhbZ3vnuTXI/AAAAAAAABG0/cMP-tK0Gn4A/s599/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-23%2520%25E4%25B8%258A%25E5%258D%258811.41.01.png" alt="tutorialspoint -- Simple Easy Learning" /></p>

<p>在网上搜索 JavaScript 教程的时候无意间发现了这个网站 – <a href="http://www.tutorialspoint.com/">tutorialpoint（简称 TP）</a>，整体感觉很像是 <a href="http://www.w3schools.com/">W3School</a>，都是一篇一篇短小精悍并且很实用的教程组成，但是内容更为丰富，不仅包括各式各样的编程语言（例如 Ruby、Python，甚至连 Assembly 都有）还包括一些网络及电脑知识（例如什么是 RSS，什么是云计算等等），编程语言的教程中还带有在线仿真编程器，你可以在其网页上就实践教程中的例子，不用为了安装一个编译器或是为了找一个好用的 IDE 伤破脑筋，先学习，觉得这门语言挺好，可以用，再找编译器或是 IDE 也不迟。</p>

<p>快速浏览了一下其中 Python，Ruby 和 Assembly 的教程，感觉教程很基础很实用，非常适合新手学习，上手快，见效快，基本看完一遍教程，大约就明白这门语言的结构并能变出简单的程序了。总而言之，是个学习电脑、网络、编程知识的好地方。</p>

<p><a href="http://www.tutorialspoint.com/">tutorialpoint（简称 TP）网站传送点</a></p>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/try-two-way-to-find-instaneous-frequency-by-using-emd.html">
		
			尝试两种利用 EMD 来计算瞬时频率的方法</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-19T19:00:00+08:00" pubdate data-updated="true">2013年08月19日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/matlab/'>Matlab</a>, <a class='category' href='/blog/categories/technology/'>Technology</a>


</div>
		
			<span class="comments"><a href="/blog/try-two-way-to-find-instaneous-frequency-by-using-emd.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>这两天利用 Matlab 尝试了两种利用 EMD 来计算瞬时频率的方法。EMD 的介绍请看<a href="http://pikipity.github.io/blog/find-a-way-to-calculate-the-instaneous-frequency.html">这里</a>。我利用的是 G. Rilling 的程序计算的 IMF，程序在<a href="http://perso.ens-lyon.fr/patrick.flandrin/emd.html">这里</a>下载。尽管这个程序存在着<a href="http://pikipity.github.io/blog/find-a-way-to-calculate-the-instaneous-frequency.html">这样</a>或<a href="http://pikipity.github.io/blog/find-a-way-to-calculate-the-instaneous-frequency-2.html">那样</a>的问题，但是他利用自己的假设找到了方法来解决，我曾经尝试着利用我在<a href="http://pikipity.github.io/blog/find-a-way-to-calculate-the-instaneous-frequency-2.html">这篇文章</a>中提到的看法来解决那些问题，但是发现，速度大大降低，结果改善却不明显，所以放弃而在这里使用他的程序。</p>

<p>这两种方法中，一种方法先使用 Hilbert Transform 求得 IMF 的瞬时相位，然后利用瞬时相位求得瞬时频率，另一种则不适用 Hilbert Transform，直接根据 IMF 类似弦波这一特性，利用局部极值点与零点来计算瞬时频率。</p>


		
		<a href="/blog/try-two-way-to-find-instaneous-frequency-by-using-emd.html" class="more-link">继续阅读</a>
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/find-a-way-to-calculate-the-instaneous-frequency-2.html">
		
			寻找一种有效估算瞬时频率的方法（EMD 求法讨论 续）</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-14T03:19:00+08:00" pubdate data-updated="true">2013年08月14日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/matlab/'>Matlab</a>, <a class='category' href='/blog/categories/technology/'>Technology</a>


</div>
		
			<span class="comments"><a href="/blog/find-a-way-to-calculate-the-instaneous-frequency-2.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>上接<a href="http://pikipity.github.io/blog/find-a-way-to-calculate-the-instaneous-frequency.html">寻找一种有效估算瞬时频率的方法</a>。</p>

<h3 id="hkt--imf">如何判断 <script type="math/tex">h_k(t)</script> 是 IMF</h3>

<p>黄锷院士提供了两种判断方法：</p>

<ol>
  <li>
    <p>根据 IMF 的定义：</p>

    <ol>
      <li>在整个信号上，局部极值（包括局部极大值和局部极小值）的个数和零点的个数必须等于或最多只能相差一个。</li>
      <li>在任意一点，局部极大值所形成的上包络线和局部极小值所形成的下包络线的平均值等于0</li>
    </ol>

    <p>在这个定义中涉及局部极值问题，也就是我们将讨论的第三个问题，所以我们这里暂且假定我们可以通过一种方法找到局部极值，那么条件的第一点就可以解决了，但是这里要注意，条件的第一点并不能等价于“所有局部极大值都大于0并且所有极小值都小于0”，尽管通过论文中的论述会很容易认为黄锷院士的本意是这样，但是仅仅根据这条论述，会出现很多特殊情况，下面举几个特殊情况的例子，如图</p>

    <p><img src="https://lh6.googleusercontent.com/-7HQOCNGo3cE/UgqLD89QF7I/AAAAAAAABCs/8flUGmA5sT4/s559/1.png" alt="一个局部极小值在零以上或是一个局部极大值在零以下" /></p>

    <p><img src="https://lh5.googleusercontent.com/-mCwygyF6gUY/UgqLD0CDH5I/AAAAAAAABC0/g5aOdQH99T4/s559/2.png" alt="刚好一个局部极值是零点" /></p>

    <p><img src="https://lh5.googleusercontent.com/-6cLysf5vzQA/UgqLDzAvxpI/AAAAAAAABCo/wDF11u8mCGM/s559/3.png" alt="刚好两个局部极值是零点" /></p>

    <p>在 G. Rilling 编写的 MATLAB 程序中，其使用的是这种方法判断的 IMF，有的时候的确会出现上面列出的三种特殊情况，但是既然是按照定义来的，那么应该也没有什么问题，况且对结果也没有大的影响。</p>

    <p>对于条件的第二点则比较困难，即使我们通过三次样条差值找到了包络线，但是我们能够求的也只是插值之后线上的取样点，所以我们只能通过取样点估算上下包络线的平均值，所以这里写为“约等于”0更为合适。</p>
  </li>
  <li>
    <p>黄锷原始在论文中提到另外一种更为简单的判断方式 – 计算 SD 值：</p>

    <table>
      <tbody>
        <tr>
          <td>$$SD_k=\frac{\sum_{t=0}^T \left</td>
          <td>h_{k-1}(t)-h_k(t) \right</td>
          <td>^2}{\sum<em>{t=0}^T h</em>{k-1}^2 (t)}$$</td>
        </tr>
      </tbody>
    </table>

    <p>然后预设一个范围，如果 SD 在此范围内，那么就是 IMF，否则不是。同时，黄锷院士指出 SD 值一般在0.2~0.3之间，但是我看到的大多数程序都是以0.3为界进行判断，小于0.3就是 IMF，大于0.3就不是。Github 上的那个程序就是如此判断的，这样判断的好处是简化了计算过程，使判断变得极为简单，坏处也是显而易见的，SD 的阀值设置的不同导致最终结果就不一样，这和 Wavelet Transform 中选取小波种类类似，阀值的选择反而增大了分析的难度。简化计算难度，增大阀值选择难度，我认为不可取，所以如果能找到一种很好的办法选择出恰当的局部极值点，我认为还是第一种判断方法比较好。</p>
  </li>
</ol>

<h3 id="section">局部极值点与零点的判断</h3>

<p>由于将来计算瞬时频率需要用到零点，所以这里我又加入了零点的判断。局部极值点与零点判断困难是因为我们需要通过有限的原始信号采样点来估计出原始信号，由于采样带来的信息缺失导致困难很大，但是因为我们不需要估计出整个信号，我们只需要估计出原始信号的局部极值与零点就可以了，如果假定采样信号的极值点“约等于”原始信号的极值点，那么我们就面临多个很容易遇到的问题，总结起来列在这里：</p>

<ol>
  <li>采样点中出现连续的极值点与零点如何处理？</li>
  <li>采样点刚好错过极值点与零点如何处理？</li>
  <li>边界点如何处理？</li>
</ol>

<p>在 G. Rilling 的程序中，他取了连续极值点或零点的中间的那个采样点来作为极值点与零点。如果原始信号是一个类正弦信号，这的确是一种好的近似方法，但是对于方波，这种近似方法显然就不合适了。而 Github 上的那个程序，完全没有考虑这个问题。</p>

<p>对于采样点刚好错过极值点与零点的情况，也就是零点或极值点在两个点之间的情况，G. Rilling 的程序只考虑了零点的情况，他将前一个点作为零点的近似，如果采样频率足够大，这的确可以，但是如果采样频率不够大，很显然这样会带来很大的误差。</p>

<p>对于边界点，G. Rilling 根据已有的采样点将边界沿拓，这样边界点就不再是边界点了。在 Github 上的程序则是很简单的将两个边界点直接加入到局部极大值与局部极小值的序列中去。边界沿拓虽然很好，但是复杂并且存在沿拓方法选择的问题。将边界点直接加入虽然简单，但是可能会导致求出的 IMF 边缘震荡，导致分解出无限个 IMF。所以两种方法各有优劣。</p>

<h2 id="section-1">我的想法</h2>

<p>其实总结起来就是两个大问题：</p>

<ol>
  <li>用局部极值求出的上下包络线会出现与原信号相交的问题，这怎么办？</li>
  <li>如何通过离散信号求出原信号的局部极值与零点？</li>
</ol>

<p>而第二个大问题主要就是上面提到的三个特殊情况：</p>

<ol>
  <li>采样点中出现连续的极值点与零点如何处理？</li>
  <li>采样点刚好错过极值点与零点如何处理？</li>
  <li>边界点如何处理？</li>
</ol>

<p>对于的第二个大问题，我认为可以使用原始信号与以求出的上下包络线的切点来修正上下包络线以此来得到不会与原始信号相交的包络线。</p>

<p>对于采样点中出现连续的极值点与零点，我认为可以全部用来计算包络线，无依据，仅仅是感觉，而且由于脑电几乎不会出现方波的状况，所以我认为 G. Rilling 的解决方法已经可以了。</p>

<p>对于采样点刚好错过极值点与零点的情况，如果是零点，我们可以通过两点确定的直线，估算出零点的位置。对于极值点，可以通过再多取几个点做插值，来估算极值点的位置。</p>

<p>对于边界点，我认为还是沿拓比较好，但是沿拓的方法还有待考虑。</p>

<p>但是如果根据我上面提到的方法修改 G. Rilling 的程序，必然带来一个很严重的情况，就是处理时间的延长。收集数据时间变短，但是处理时间变长，致使总时间几乎不改变甚至变长，这完全没有达到我们开始希望的结果嘛，所以 EMD 求法有待讨论与寻找。我认为，如果可以找到一种快速有效解决上述问题的方法，寻找瞬时频率并不是问题。</p>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/cube-slam.html">
		
			推荐一款游戏 Cube Slam</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-13T00:01:00+08:00" pubdate data-updated="true">2013年08月13日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/game/'>Game</a>, <a class='category' href='/blog/categories/google/'>Google</a>


</div>
		
			<span class="comments"><a href="/blog/cube-slam.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p><img src="https://lh4.googleusercontent.com/-idNKKzH2b_0/UgkIm7DLEPI/AAAAAAAABCI/XOPh1qkCafI/s800/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-13%2520%25E4%25B8%258A%25E5%258D%258812.03.25.png" alt="Cube Slam" /></p>

<p>今天推荐一款游戏 – <a href="https://www.cubeslam.com">Cube Slam</a>，这款游戏来自于 <a href="http://www.chromeexperiments.com/">Chrome Experiment</a>，只可以使用 <a href="https://www.google.com/intl/zh-CN/chrome/browser/">Chrome 浏览器</a>才可以打开。这款游戏很简单，就是通过移动面前的挡板来阻挡滑块打中自己，开始会有一层保护膜保护自己，当保护膜被击中一次之后就消失了，场上还会随机出现各式各样的道具，比如加长你的挡板、场上出现大雾或是挡板发射假滑块干扰对方等等。这个游戏不仅可以和电脑（那只熊）对战，也可以邀请其他人对战，当你进入游戏的时候会随机分配一个地址给你，你只要把你的地址发送给对方你们两人就可以开始对抗了（我应该常在<a href="https://www.cubeslam.com/bdysis">这里</a>，来找我玩啊 :-D）。</p>

<p>这款游戏不是基于 Flash 制作的（现在好像已经没有多少网页游戏还固守于 Flash 了吧），前段使用 WebGL 和 three.js 搭建产生出3D效果，后端用 Go 语言编写，这个游戏搭建在 Google APP 云端，所以不会在你的电脑上留下许许多多不必要的垃圾文件，同时实现速度流畅。你甚至可以直接打开 Chrome 中的“开发者工具”来浏览源码。更多有关游戏的技术，可以到<a href="https://www.cubeslam.com/tech">这里</a>看一看。</p>

<p><img src="https://lh4.googleusercontent.com/-tgaNnaaGBG8/UgkIm77nS9I/AAAAAAAABCQ/RU1JxWdidQo/s800/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-13%2520%25E4%25B8%258A%25E5%258D%258812.03.32.png" alt="操作说明" /></p>

<p><img src="https://lh6.googleusercontent.com/-2u8g95xSROQ/UgkInHfMuVI/AAAAAAAABCM/rCY_e3GAzJk/s800/%25E5%25B1%258F%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%25202013-08-13%2520%25E4%25B8%258A%25E5%258D%258812.03.48.png" alt="与“熊”对战" /></p>

		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/how-to-make-a-giant-robot-mech-youtube-geek-week.html">
		
			机器人机甲是如何炼成的</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-11T18:49:00+08:00" pubdate data-updated="true">2013年08月11日</time></div>
		<div class="tags" style="float:left;">

</div>
		
			<span class="comments"><a href="/blog/how-to-make-a-giant-robot-mech-youtube-geek-week.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>我一直认为，一个正真的项目并不是只用一个专业的知识就可以完成的。如果可以把一个成熟的项目称为一个生命体的话，那么完成这个项目的人就应该称为这个项目的上帝了吧，所以，仅仅考一个专业的知识是无法完成的。这就体现了合作的重要性，每个人专精于自己的所长，努力完成自己工作的同时，将自己的所知所学与他人分享，并从他人那里汲取知识，然后多人的智慧融会贯通逐渐将一个项目从无到有，最终将其推向完美，这才是我们需要的。我认为“澳门大学”的科技学院现在需要的正式这种多专业合作的感觉，不是每个专业，甚至每个专业里面的各个小分支都各自顾各自，而应该尝试将各个专业的长处进行融合，使科技学院形成一个整体来运作。数学专业为各个专业做理论基础；机电专精机械，打造成品主构架；电机专精电子，为项目嵌入电子的控制芯片；软件专精程序撰写，为芯片写入可以使其运作的程序。这样各司其职，互相学习，互相进步，比强迫每个专业都要乱七八糟的什么都学强多了。</p>

<p>这个视频是 YouTube 在 Geek Week 时发起的一个项目，目的是制作一个巨大的机器人机甲，整个视频关键的不是技术，因为没有什么新颖的科技，甚至有些都是已经市场化的技术，关键的是其中那种各个专业、各个领域的人们团结一致，合作完成项目的那种氛围。我第一次看的时候我就决定一定要搬运这个专题，要让更多的人感觉到这种感觉。</p>

<p>YouTube 视频地址在<a href="http://www.youtube.com/channel/UCftwRNsjfRo08xYE31tkiyw">这里</a>。国内的话，我搬运到了 bilibili 上，画质降低了，是没办法啊，上传渣浪也只能这样了，地址在<a href="http://www.bilibili.tv/video/av702285/">这里</a>。下面是第一个视频，一个此项目的总体介绍，喜欢的话还是去 <a href="http://www.bilibili.tv/video/av702285/">bilibili</a> 看全部吧。高清视频在<a href="http://pan.baidu.com/share/link?shareid=2919109282&amp;uk=4080321956">这里</a>下载</p>

<embed height="452" width="544" quality="high" allowfullscreen="true" type="application/x-shockwave-flash" src="http://static.hdslb.com/miniloader.swf" flashvars="aid=702285&amp;page=1" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" />


		
		
	</div>


</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/find-a-way-to-calculate-the-instaneous-frequency.html">
		
			寻找一种有效估算瞬时频率的方法（EMD 求法讨论）</a>
	</h2>
	<div class="meta">
	       <div class="author" style="float:left;">
  

<span class="byline author vcard">Posted by <span class="fn">pikipity</span></span>
&nbsp;</div>
		<div class="date" style="float:left;">








  


<time datetime="2013-08-09T18:50:00+08:00" pubdate data-updated="true">2013年08月09日</time></div>
		<div class="tags" style="float:left;">


	<a class='category' href='/blog/categories/matlab/'>Matlab</a>, <a class='category' href='/blog/categories/technology/'>Technology</a>


</div>
		
			<span class="comments"><a href="/blog/find-a-way-to-calculate-the-instaneous-frequency.html#com_target">Comments</a></span>
		
	</div>
	<div class="entry-content" style="clear:both;">
		<p>我试图寻找一种可以用比较少的数据点就可以较为精确的估算某个时刻瞬时频率的方法，当然了，根据“薛定尔的胖次”（对于虐猫狂人薛定谔不熟悉的可以去看<a href="https://docs.google.com/file/d/0B8AjE9xqZzSiNlVlSEkxNi1uTFE/edit?usp=sharing">这里</a>的这本少儿读本，写的很好）在信号分析中的拓展，如果要精确计算瞬时频率就需要一个在时域上无限长的信号，当然这是不可能的，所以，如果能够找到一种计算方法，在时域上的精度和频域上的精度问题上去的平衡就可以了。</p>

<p>在经过一番大搜索之后，发现现在最为流行的求瞬时频率的方法就是 HHT（希尔伯特-黄转换，也就是 EMD，经验模态分析，论文在<a href="https://docs.google.com/file/d/0B8AjE9xqZzSiUDhGRkJ3UEwzNjQ/edit?usp=sharing">这里</a>，洋洋洒洒90多页，大家慢慢看）。</p>

<h2 id="section">什么是瞬时频率</h2>

<p>第一个问题我就说不清楚，一般来说，把瞬时频率定义为</p>

<script type="math/tex; mode=display">f(t)=\frac{1}{2\pi}\frac{d\theta(t)}{dt}</script>

<p>这个定义是 Cohen 提出的，但是这个定义仅限于 “monocomponent function”，但是什么是 “monocomponent function” 呢？他没说。。。（坑爹啊 (╯‵□′)╯︵┻━┻）但是 Gabor， Bedrosian 和 Boashash 提出：</p>

<blockquote>
  <p>for any function to have a meaningful instantaneous frequency, the real part of its Fourier transform has to have only positive frequency.</p>
</blockquote>

<p>黄锷院士（就是这个 HHT 的创始人啦）进一步验证得到，对于平均值为零的局部对称信号而言，上述定义的瞬时频率才具有物理意义。</p>

<p>据说，“澳门大学”（请注意，这里不是做宣传）的钱涛教授在提出 AFD 的时候定义了更为准确的瞬时频率，但是博主愚钝，到现在也没看懂他的论文，甚至都不知道从何看起，所以更不用提他提出的方法和定义了。</p>

<h2 id="section-1">寻找新方法的原因</h2>

<p>在寻找到 HHT 之前，手头已经有的方法大体可以分为两种 – Fourier Transform 和 Wavelet Transform，当然还包括一些 Fourier Transform 的变种，例如 Wigner–Ville Distribution。但是这两种方法都存在着各种各样的缺点。</p>

<h3 id="fourier-transform">Fourier Transform</h3>

<p>我们都知道，Fourier Transform 是试图将一个信号分解为多个幅值和频率固定的三角函数线，对于其对于信号的要求是稳定、收敛，但是实际中，尤其是在脑电中，我们无法保证自己截取的信号就是符合要求的。而且 Fourier Transform 所求的是一种平均频率分布，这意味其会带来两大缺点：</p>

<ol>
  <li>能量分散到了整个频谱上，难以辨清具体频率所在。</li>
  <li>产生了无意义的负频。</li>
</ol>

<p>当然，以上两点都可以接受的话，其最致命的缺点就是 <strong>丧失了时间信息</strong>。尽管 STFT (Short Time Fourier Transform) 利用窗截取某个时间段的信号，可以在一定程度上获得瞬间频率，但是由于窗长度一旦选取就固定不变，导致时间精度固定，从而导致频率精度也固定，这样对频率的突变就及其不敏感，而检测突变则是信号分析中非常重要的，所以 Fourier Transform 难以分析瞬时频率。</p>

<h3 id="wavelet-transform">Wavelet Transform</h3>

<p>根据下面 Wavelet Transform 的公式，我们可以清楚的看出，为了改善 Fourier Transform 会丧失时间信息的缺点，Wavelet Transform 添加两个参数 $b$（时间刻度）和 $a$（频率刻度，可以转化为对应的频率），这样就可以同时获得时间和频率两方面的信息。同时，不再使用三角函数作为基函数，而是使用小波 $\phi$ 作为基函数，可以解决 Fourier Transform 用稳定信号分析不稳定信号的问题。</p>

<script type="math/tex; mode=display">W(a,b;W,\phi)=\frac{1}{\sqrt{a}}\int_{-\infty}^{\infty}W(t)\phi^*(\frac{t-b}{a})dt</script>

<p>但其对 Fourier Transform 的改善还是存在缺点：</p>

<ol>
  <li>尽管随着 $a$ 的变化，频率可以在多分辨度下进行解析，但是在某一个分辨度下，其分辨精度还是固定不变的。</li>
  <li>小波一旦选定就无法改变，没有办法保证此小波在整个波段上都合适。</li>
  <li>小波选择问题难以解决，一般只不过是通过经验来进行选择。</li>
</ol>

<h2 id="hht">HHT</h2>

<p>就算上面两种方法可以完美解析实际信号，但是也很难从他们的算法中找到计算瞬时频率的办法，那么根据提到的定义，要找瞬时频率，就要先找瞬时相位，于是慢慢征程刚开始啊。。。</p>

<h3 id="ht">HT</h3>

<p>Gabor 提出一种定义信号相位的方法，如果能够把信号表示成为其对应的复数形式（如下），那么相位自然也就找到了。</p>

<script type="math/tex; mode=display">z(t)=s(t)+j\hat{s}(t)</script>

<p>上式中的 $\hat{s}(t)$ 可以通过 Hilbert Transform (HT) 来得到。下式就是 HT 的转化方法。</p>

<script type="math/tex; mode=display">\hat{s}(t)=\frac{1}{\pi}\int_{-\infty}^{\infty}\frac{s(t)}{t-\tau}d\tau</script>

<p>为了使信号可以进行 HT，并且具有有意义的瞬时频率，必须先对信号进行处理，于是黄锷院士提出 HHT。</p>

<h3 id="imf">IMF</h3>

<p>所谓对信号进行处理，就是将信号拆分为多个可以进行 HT 来寻找瞬时频率的信号 – Intrinsic Mode Function（IMF）。IMF 满足一下两点：</p>

<ol>
  <li>在整个信号上，局部极值（包括局部极大值和局部极小值）的个数和零点的个数必须等于或最多只能相差一个。</li>
  <li>在任意一点，局部极大值所形成的上包络线和局部极小值所形成的下包络线的平均值等于0</li>
</ol>

<p>这个由原始信号到 IMF 的分解流程称为 Empirical Mode Decomposition (EMD)。</p>

<h3 id="emd">EMD</h3>

<p>EMD 的流程非常明确，在上面提供的论文中都有写，待分析的信号为 $s(t)$：</p>

<ol>
  <li>找出 $s(t)$ 的所有局部极大值和局部极小值，接着利用三次样条插值得到由局部极大值连接形成的上包络线和局部极小值连接形成的下包络线。</li>
  <li>求出上下包络线的平均值 <script type="math/tex">m_1(t)</script></li>
  <li>
    <p>利用下式得到第一分量：</p>

<script type="math/tex; mode=display">h_1(t)=s(t)-m_1(t)</script>
  </li>
  <li>
    <p>检查 <script type="math/tex">h_1(t)</script> 是否是 IMF，如果不是则将 <script type="math/tex">h_1(t)</script> 作为原信号返回第一步，直到 <script type="math/tex">h_k(t)</script> 是 IMF，就得到了一个 IMF 分量 <script type="math/tex">c_1(t)</script>，也就是</p>

<script type="math/tex; mode=display">c_1(t)=h_k(t)</script>
  </li>
  <li>
    <p>求剩余分量：</p>

<script type="math/tex; mode=display">r_1(t)=s(t)-c_1(t)</script>
  </li>
  <li>将 $r_1(t)$ 当做新资料，返回步骤1，直到 $r_n(t)$ 为单调函数完成分解。</li>
</ol>

<p>完成分解后，就将原始信号分解为了 $n$ 个 IMF 和一个趋势函数，也就是</p>

<script type="math/tex; mode=display">s(t)=\sum_{k=1}^nc_k(t)+r_n(t)</script>

<h2 id="emd--matlab-">EMD 的 MATLAB 实现</h2>

<p>尽管上面的算法流程第一次看起来清晰明了，但是要注意，我们分析的是离散的数据点，而不是连续的信号，于是这就带来了很多问题，以至于上面流程中很多名词都没有严格的定义，需要我们自己来在编写程序的时候来定义，根据定义的不同，程序最后运行的结果也就会不同。一边考虑我们要分析的信号是离散信号，一边在看一遍上面的流程就会很容易发现下面几个问题：</p>

<ol>
  <li><strong>如何定义离散信号的局部极大值与局部极小值？</strong>因为我们的离散信号是通过实际信号采样得来的，那么就会出现离散信号的局部极值与原始实际信号的局部极值不一样的情况，甚至出现多个连续一样的局部极值，处理起来非常麻烦；而且在考虑局部极值的时候还会出现边缘问题，<strong>离散信号最开始与最末尾的两个点如何处理？</strong>绝对不能舍弃，因为在上面的流程中计算局部极值是会在循环中多次出现，如果每次舍弃两个点，会丢失大量数据，而处理不当，在插值的时候边缘会产生出奇怪的震荡导致 IMF 计算不准确影响瞬时频率估计。</li>
  <li><strong>三次样条插值如何用 MATLAB 实现？</strong>这应该是最容易解决的问题了，因为 MATLAB 中有现成的函数，随后介绍。</li>
  <li><strong>如何判断 $h_k(t)$ 是 IMF？</strong>这个问题应该是第二简单的问题了，随后介绍。</li>
</ol>

<p>以上三个问题的解决方式不同，分解出的 IMF 也就不同，估算得到的瞬时频率的准确度也就不同，我找了多个程序，并自己编写了一个程序，但是效果都不能说是很好，其实还是蛮失望的，EMD 这个方法出现也有很多年了，结果连一个现成的比较完美的 MATLAB 程序都没有。这里使用国际比较认可的由一个法国人 G. Rilling 编写的程序（可以在<a href="http://perso.ens-lyon.fr/patrick.flandrin/emd.html">这里</a>下载到）和我在 Github 上找到的一个效果速度也还可以的 MATLAB 程序（可以在<a href="https://github.com/daochenghaike/EMD.git">这里</a>下载到）综合说明一下他们对上面三个问题的解决方法和我的一些见解。（我写的程序在<a href="https://github.com/pikipity/EMD-using-MATLAB.git">这里</a>，但是仅仅当做错误教程看一看就可以了，方法极度不可取，速度慢不说，分解出来的本应完全正交的 IMF 的频域还会出现重叠，边缘也出现了震荡，导致出现了很多低频杂波。）</p>

<p>由于上面三个问题难易程度不一，我会先讨论第二个问题，然后是第三个，最后再讨论第一个。</p>

<h3 id="matlab-">如何用 MATLAB 实现三次样条差值</h3>

<p>在 MATLAB 中有三种方法可以实现三次样条差值：</p>

<ol>
  <li>
    <p><code>yy=spline(x,y,xx)</code>：我从 Github 上找到的那个程序使用的是这种插值方式。其中，<code>x</code>是断点的横坐标，<code>y</code>是断点的纵坐标，<code>xx</code>是插值之后重新构成的函数采样点的横坐标，<code>yy</code>是插值之后重新构成的函数采样点的纵坐标。当然，你也可以使用 <code>pp=spline(x,y)</code>，这样得到的<code>pp</code>是插值之后的到的函数的 structure，然后可以通过 <code>yy=ppval(pp,xx)</code> 来得到重新构成的函数的采样点。插值效果如图</p>

    <p><img src="https://lh6.googleusercontent.com/-DNSR-F6UQw0/UgY0P9GUX7I/AAAAAAAABBk/L_rerjnTI2k/s912/1.jpg" alt="使用```spline```进行插值" /></p>
  </li>
  <li>
    <p><code>pp=csape(x,y,CONDS)</code>：在我的程序中，这个函数的特点是你可以通过改变<code>CONDS</code>来使用不同的计算三系样条插值的方法，这些方法唯一的不同就是使用的 boundary condition 不一样，根据你选择的方法的不同，你可能需要多提供边界的一次导数或是二次导数作为额外的 boundary condition 来进行计算。其他的参数和第一个方法一样。效果如图</p>

    <p><img src="https://lh4.googleusercontent.com/-LRaMxf6QZdo/UgY0PzPmmTI/AAAAAAAABBs/isBKeOjLf28/s912/2.jpg" alt="使用```csape```进行插值" /></p>
  </li>
  <li>
    <p><code>yy=interp1(x,y,xx,'spline')</code>：这个方法的本质还是调用第一个方法中的函数进行运算，所以其实可以合并到方法一中。G. Rilling 使用的这种方法。</p>
  </li>
</ol>

<p>将上面两种方法进行比较，得到下面这幅图</p>

<p><img src="https://lh3.googleusercontent.com/-qJl5fKw60o8/UgY0P55hX5I/AAAAAAAABBw/x55p0wIhqyI/s912/3.jpg" alt="```spline```和```csape```插值效果比较" /></p>

<p>我们可以发现，只有边界处出现细微差别，其他完全一样，如果调整<code>csape</code>的插值方法，可以得到完全一样的结果，所以使用哪种的效果是完全一样的。</p>

<p>要注意我们用 MATLAB 做三次样条差值是为了寻找上下包络线，那么什么是包络线呢？维基上的解释是这样的</p>

<blockquote>
  <p>在几何学，某个曲线族的包络线（Envelope），是跟该曲线族的每条线都有至少一点相切的一条曲线。（曲线族即一些曲线的无穷集，它们有一些特定的关系。）</p>
</blockquote>

<p>不知道你看懂没有，反正我是没有看懂（囧）。但是我至少看懂了一点，包络线不能和曲线族相交们仅仅是相切，但是用局部极值点三次样条差值得到的包络线有的时候会出现与原信号相切的情况，<a href="http://blog.sina.com.cn/s/blog_6ad0d3de01016two.html">这里</a>提供了一种用切点求包络线的方法，但是据博主说，计算用时会大大增加，EMD 的计算用时本来就很长，如果再让求包络线拖慢时间我认为并不值得，况且出现相切的状况只在局部斜率变化缓慢时出现，脑电上很少出现这种状况，所以我认为用极值点插值已经足够了。</p>

<p>然后是是否使用更高次的插值方式，很多论文中提到使用更高次的插值方式使得到的包络线更加平滑，但是我认为完全没有必要，三次样条插值已经足以满足平滑上的需求，而且我们将来使用的也只不过是插值的到的取样点，过好的平滑反而有可能会被取样点的疏松掩盖掉，三次样条差值足以。</p>

<p>（未完待续）</p>

		
		
	</div>


</article>


<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    pikipity



</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-38118079-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>